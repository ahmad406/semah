{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-08-25 19:52:26.962850",
 "css": ".grid-container {\r\n  display: grid;\r\n  grid-template-columns: auto auto auto;\r\nborder: 1px solid;\r\n\r\n}\r\n.grid-item {\r\n    line-height: 2;\r\n  text-align: start;\r\n\r\n}\r\n.letter-head{\r\n    position: absolute;\r\n}  \r\n.print-heading {\r\n    text-align: right;\r\n    text-transform: none;\r\n}",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Delivery Note",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"\\n{% set printed_time=frappe.utils.now() %}\\n{%set\\nfullnm=frappe.db.get_value('User', doc.owner, 'full_name') %}\\n\\n<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Delivery Note<br>\\u0633\\u0646\\u062f \\u062a\\u0633\\u0644\\u06cc\\u0645</div><small class=\\\"sub-heading\\\">{{ doc.name }}\\n<br><span style=\\\"font-size: 90%;\\\"><b>Created By :</b> {{fullnm}}<br>\\n<span >\\n    <!--<b>Created on :</b>{{doc.get_formatted(\\\"posting_date\\\")}}<br>-->\\n    Printing Date :{{frappe.utils.formatdate(printed_time,\\\"dd-MM-yyyy\\\")}}  {{ frappe.utils.now_datetime().strftime(\\\"%H:%M\\\") }}\\n    </span> \\n</span>\\n</small>\\t\\t\\t\\t</h2></div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"  {% set attr =[] %}\\r\\n    {% set mobile =[] %}\\r\\n\\r\\n{% if doc.sub_customer %}\\r\\n   {% set cust = frappe.get_doc(\\\"Customer\\\",doc.customer) %}\\r\\n   {% for i in cust.sub_customer %}\\r\\n   {%if i.sub_customer_full_name ==doc.sub_customer %}\\r\\n            {% set __=attr.append(i.contact_person_name )%}\\r\\n            {% set __=mobile.append(i.contact_person_phone )%}\\r\\n   \\r\\n   {%endif%}\\r\\n   {%endfor%}\\r\\n\\r\\n{%endif%}\\r\\n\\r\\n\\r\\n<div class=\\\"grid-container\\\">\\r\\n  <div class=\\\"grid-item\\\" style=\\\"border-right: 1px solid;\\\"><b style=\\\"margin: 6px;\\\">Ship Date :</b>{{doc.get_formatted(\\\"lr_date\\\")}}<br>\\r\\n  <!--<b style=\\\"margin: 6px;\\\">Number:</b>  {{doc.name}}<br>-->\\r\\n        <b style=\\\"margin: 6px;\\\">Customer Name:</b>{{doc.sub_customer or doc.customer}}<br>\\r\\n  </div>\\r\\n  <div class=\\\"grid-item\\\" style=\\\"border-right: 1px solid;\\\">\\r\\n      <!--<b>Customer Code:</b><br>-->\\r\\n\\r\\n      <b style=\\\"margin: 6px;\\\">Att:</b>{%if doc.sub_customer%}{{doc.contact_person_name or \\\" \\\"}}{%endif%}\\r\\n      <br>\\r\\n      {%set mbl= frappe.db.get_value('Customer', doc.customer, 'mobile_no')%}\\r\\n <b style=\\\"margin: 6px;\\\"> Mobile:{%if doc.sub_customer%}{{doc.contact_person_phone or \\\" \\\"}}{%else%} \\r\\n{{mbl or \\\" \\\"}}\\r\\n {%endif%}</b><br>\\r\\n <b style=\\\"margin: 6px;\\\">Truck:</b>{{doc.vehicle_no or \\\"\\\"}}<br>\\r\\n  \\r\\n      </div>\\r\\n\\r\\n  <div class=\\\"grid-item\\\">\\r\\n      <b style=\\\"margin: 6px;\\\">Driver Name:</b>{{doc.driver_name or \\\"\\\"}}<br>\\r\\n\\r\\n <b style=\\\"margin: 6px;\\\">Driver Mobile:</b>{{doc.driver_mobile or \\\"\\\"}}<br>\\r\\n\\r\\n </div>  \\r\\n \\r\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set total = [0] -%}\\r\\n{% set total_pallets = [0] -%}\\r\\n{% set grouped_items = {} -%}\\r\\n\\r\\n{# Group items by item_code and expiry_date #}\\r\\n{%- for row in doc.storage_details -%}\\r\\n    {% set manufacturing_date, expiry_date = frappe.db.get_value('Batch', row.batch_no, ['manufacturing_date','expiry_date']) if row.batch_no else (None, None) %}\\r\\n    {% set expiry_date_formatted = expiry_date.strftime('%d-%m-%Y') if expiry_date else '' %}\\r\\n    {% set key = row.item_code ~ expiry_date_formatted %}\\r\\n\\r\\n    {% if key not in grouped_items %}\\r\\n        {% set item = frappe.get_doc(\\\"Item\\\", row.item_code) %}\\r\\n        {% set _ = grouped_items.update({key: {\\r\\n            'item_code': row.item_code,\\r\\n            'customer_batch_id': row.customer_batch_id,\\r\\n            'batch_no': row.batch_no,\\r\\n            'item_description': item.description,\\r\\n            'delivery_qty': row.delivery_qty,\\r\\n            'stock_uom': item.stock_uom,\\r\\n            'manufacturing_date': manufacturing_date,\\r\\n            'expiry_date': expiry_date,\\r\\n            'expiry_date_formatted': expiry_date_formatted,\\r\\n            'pallet_count': 1\\r\\n        }}) %}\\r\\n    {% else %}\\r\\n        {% set _ = grouped_items[key].update({\\r\\n            'delivery_qty': grouped_items[key].delivery_qty + row.delivery_qty,\\r\\n            'pallet_count': grouped_items[key].pallet_count + 1\\r\\n        }) %}\\r\\n    {% endif %}\\r\\n    \\r\\n    {% if total.append(total.pop() + row.delivery_qty) -%}{% endif %}\\r\\n    {% if total_pallets.append(total_pallets.pop() + 1) -%}{% endif %}\\r\\n{%- endfor -%}\\r\\n\\r\\n<table class=\\\"table table-bordered table-condensed\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th style=\\\"text-align: center;\\\">Item Code</th>\\r\\n                <th style=\\\"text-align: center;\\\">SKU</th>\\r\\n            <th style=\\\"text-align: center;\\\">Batch/Barcode</th>\\r\\n            <th style=\\\"text-align: center;\\\">Description</th>\\r\\n            <th style=\\\"text-align: center;\\\">Quantity</th>\\r\\n            <th style=\\\"text-align: center;\\\">Unit</th>\\r\\n            <th style=\\\"text-align: center;\\\">Produced Date</th>\\r\\n            <th style=\\\"text-align: center;\\\">Expiry Date</th>\\r\\n            <th style=\\\"text-align: center;\\\">Pallet Count</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        {%- for key, row in grouped_items.items() -%}\\r\\n        <tr>\\r\\n            <td>{{ row.item_code }}</td>\\r\\n             <td>{{ frappe.db.get_value('Item', row.item_code, 'sku')  }}</td>\\r\\n            \\r\\n        \\r\\n            <td>\\r\\n                {% if row.customer_batch_id and row.batch_no %}\\r\\n                    {{ row.customer_batch_id }}\\r\\n                {% else %}\\r\\n                    {{ row.batch_no or \\\"\\\" }}\\r\\n                {% endif %}\\r\\n            </td>\\r\\n            <td>{{ row.item_description }}</td>\\r\\n            <td style=\\\"text-align: center;\\\">{{ row.delivery_qty | int }}</td>\\r\\n            <td>{{ row.stock_uom }}</td>\\r\\n            <td>\\r\\n                {% if row.manufacturing_date %}\\r\\n                    {{ row.manufacturing_date.strftime('%d-%m-%Y') }}\\r\\n                {% endif %}\\r\\n            </td>\\r\\n            <td>{{ row.expiry_date_formatted }}</td>\\r\\n            <td style=\\\"text-align: center;\\\">{{ row.pallet_count }}</td>\\r\\n        </tr>\\r\\n        {%- endfor -%}\\r\\n    </tbody>\\r\\n</table>\\r\\n\\r\\n<span style=\\\"border: 1px solid; padding: 8px 0px 7px 0px !important;\\\">\\r\\n    <b style=\\\"padding: 6px; background-color: #eeeeee;\\\">Total quantity</b>\\r\\n    {{ total[0] | int }} &nbsp;\\r\\n    <b style=\\\"padding: 6px; background-color: #eeeeee;\\\">Total pallets</b>\\r\\n    {{ total_pallets[0] | int }}\\r\\n</span>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<br><br><br>\\r\\n\\r\\n<table height=\\\"100px\\\" class=\\\"maintbl\\\">\\r\\n    <tr>\\r\\n        <td width=\\\"5%\\\" style=\\\"text-align: center;\\\">\\r\\n            <div class=\\\"text-center\\\">\\r\\n                <p style=\\\"border-bottom: 2px dotted; margin-bottom: 5px;\\\"> </p>\\r\\n                <p>Customer</p>\\r\\n            </div>\\r\\n        </td>\\r\\n      \\r\\n        <td width=\\\"5%\\\" style=\\\"text-align: center;\\\">\\r\\n            <div class=\\\"text-center\\\">\\r\\n                <p style=\\\"border-bottom: 2px dotted; margin-bottom: 5px;\\\"> </p>\\r\\n                <p>Driver</p>\\r\\n            </div>\\r\\n        </td>\\r\\n        <td width=\\\"5%\\\" style=\\\"text-align: center;\\\">\\r\\n            <div class=\\\"text-center\\\">\\r\\n                <p style=\\\"border-bottom: 2px dotted; margin-bottom: 5px;\\\">  </p>\\r\\n                <p>Warehouse</p>\\r\\n            </div>\\r\\n        </td>\\r\\n    </tr>\\r\\n</table>\\r\\n\\r\\n\\r\\n\"}]",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2025-09-12 14:24:55.490873",
 "modified_by": "Administrator",
 "module": "Semah",
 "name": "Bahri DN",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}