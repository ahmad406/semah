{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-08-25 19:48:46.364235",
 "css": ".grid-container {\r\n  display: grid;\r\n  grid-template-columns: auto auto ;\r\nborder: 1px solid;  \r\n}\r\n.grid-item {\r\n    line-height: 2;\r\n  text-align: start;\r\n\r\n}\r\n.letter-head{\r\n    position: absolute;\r\n}\r\n.print-heading {\r\n    text-align: right;\r\n    text-transform: none;\r\n}",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Stock Entry",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"\\n{% set printed_time=frappe.utils.nowdate() %}\\n{%set fullnm=frappe.db.get_value('User', doc.owner, 'full_name') %}\\n<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>RECEIVING NOTE<br>\\u0633\\u0646\\u062f \\u0625\\u0633\\u062a\\u0644\\u0627\\u0645</div><small class=\\\"sub-heading\\\"\\n> <span style=\\\"margin-right:8%\\\">{{ doc.name }}</span><br>\\n<span style=\\\"font-size: 90%;\\\">\\n    <span style=\\\"    margin-right: 6%;\\\"><b>Created By :</b> {{fullnm}}</span><br>\\n<span style=\\\"margin-right: 7%;\\\" >\\n    <b>Created On :</b>{{doc.get_formatted(\\\"posting_date\\\")}}\\n        </span> <br>\\n            <span> \\n    <b> Printing Date : </b>{{frappe.utils.formatdate(printed_time,\\\"dd-MM-yyyy\\\")}}  {{ frappe.utils.now_datetime().strftime(\\\"%H:%M\\\") }}\\n    </span> \\n</span>\\n</small>\\t\\t\\t\\t</h2></div>\\n\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"grid-container\\\">\\r\\n    <div class=\\\"grid-item\\\" style=\\\"border-right: 1px solid;\\\"><b style=\\\"margin: 4px;\\\">Reciept Date :</b>{{doc.get_formatted(\\\"posting_date\\\")}}<br>\\r\\n        <b style=\\\"margin: 4px;\\\">Notes: {{doc.remarks or  \\\" \\\"}}</b> \\r\\n    </div>\\r\\n    <div class=\\\"grid-item\\\">\\r\\n        <!--<b>Customer Code:</b><br>-->\\r\\n        <b style=\\\"margin: 4px;\\\">Customer Name:</b>{%if doc.sub_customer%}{{doc.sub_customer}}{%else%}{{doc.customer_nm}}{%endif%}<br>\\r\\n           <b style=\\\"margin: 4px;\\\">Customer Code/ID:</b>{{doc.customer_code or \\\"\\\"}}\\r\\n    </div>\\r\\n</div>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set total_qty = [0] %}\\r\\n{% set total_pallets = [0] %}\\r\\n{% set grouped_items = {} %}\\r\\n\\r\\n{# Group by item_code + expiry_date #}\\r\\n{% for row in doc.storage_details %}\\r\\n    {% set manufacturing_date, expiry_date = frappe.db.get_value('Batch', row.batch_no, ['manufacturing_date','expiry_date']) if row.batch_no else (None, None) %}\\r\\n    {% set expiry_date_formatted = expiry_date.strftime('%d-%m-%Y') if expiry_date else '' %}\\r\\n    {% set key = row.item_code ~ expiry_date_formatted %}\\r\\n\\r\\n    {% if key not in grouped_items %}\\r\\n        {% set _ = grouped_items.update({\\r\\n            key: {\\r\\n                'item_code': row.item_code,\\r\\n                'customer_batch_id': [row.customer_batch_id if row.customer_batch_id else row.batch_no],\\r\\n                'item_description': row.item_description,\\r\\n                'stored_qty': row.stored_qty,\\r\\n                'manufacturing_date': manufacturing_date,\\r\\n                'expiry_date': expiry_date,\\r\\n                'expiry_date_formatted': expiry_date_formatted,\\r\\n                'pallets': [row.pallet] if row.pallet else []\\r\\n            }\\r\\n        }) %}\\r\\n    {% else %}\\r\\n        {% set _ = grouped_items[key].update({\\r\\n            'stored_qty': grouped_items[key].stored_qty + row.stored_qty,\\r\\n            'customer_batch_id': grouped_items[key].customer_batch_id + [row.customer_batch_id if row.customer_batch_id else row.batch_no],\\r\\n            'pallets': grouped_items[key].pallets + ([row.pallet] if row.pallet else [])\\r\\n        }) %}\\r\\n    {% endif %}\\r\\n\\r\\n    {# Add qty to total_qty[0] #}\\r\\n    {% set _ = total_qty.append(total_qty.pop() + row.stored_qty) %}\\r\\n{% endfor %}\\r\\n\\r\\n<table class=\\\"table table-bordered table-condensed\\\">\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th style=\\\"text-align:center;\\\">Item Code</th>\\r\\n       \\r\\n            <th style=\\\"text-align:center;\\\">Description</th>\\r\\n            <th style=\\\"text-align:center;\\\">Quantity</th>\\r\\n            <th style=\\\"text-align:center;\\\">Unit</th>\\r\\n            <th style=\\\"text-align:center;\\\">Produced Date</th>\\r\\n            <th style=\\\"text-align:center;\\\">Expiry Date</th>\\r\\n            <th style=\\\"text-align:center;\\\">Pallet Count</th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        {% for key, row in grouped_items.items() %}\\r\\n            {% set unique_pallets = (row.pallets | unique | list) %}\\r\\n            {% set pallet_count = unique_pallets | length %}\\r\\n            {% set _ = total_pallets.append(total_pallets.pop() + pallet_count) %}\\r\\n        <tr>\\r\\n            <td>{{ row.item_code }}</td>\\r\\n          \\r\\n            <td>{{ row.item_description }}</td>\\r\\n            <td class=\\\"text-right\\\">{{ row.stored_qty }}</td>\\r\\n            <td class=\\\"text-right\\\">{{ frappe.db.get_value(\\\"Item\\\", row.item_code, \\\"stock_uom\\\") }}</td>\\r\\n            <td class=\\\"text-right\\\">{% if row.manufacturing_date %}{{ row.manufacturing_date.strftime('%d-%m-%Y') }}{% endif %}</td>\\r\\n            <td class=\\\"text-right\\\">{{ row.expiry_date_formatted }}</td>\\r\\n            <td class=\\\"text-right\\\">{{ pallet_count }}</td>\\r\\n        </tr>\\r\\n        {% endfor %}\\r\\n    </tbody>\\r\\n</table>\\r\\n\\r\\n<span style=\\\"border: 1px solid; padding: 8px 0px 7px 0px !important;\\\">\\r\\n    <b style=\\\"padding: 6px; background-color: #eeeeee;\\\">Total Quantity</b>\\r\\n    {{ \\\"{:,.2f}\\\".format(total_qty[0]) }} &nbsp;\\r\\n</span>\\r\\n\\r\\n<span style=\\\"border: 1px solid; padding: 8px 0px 7px 0px !important; margin-left:20px;\\\">\\r\\n    <b style=\\\"padding: 6px; background-color: #eeeeee;\\\">Total Pallets</b>\\r\\n    {{ total_pallets[0] }}\\r\\n</span>\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<br><br><br>\\r\\n\\r\\n<table height=\\\"100px\\\" class=\\\"maintbl\\\">\\r\\n    <tr>\\r\\n        <td width=\\\"5%\\\" style=\\\"text-align: center;\\\">\\r\\n            <div class=\\\"text-center\\\">\\r\\n                <p style=\\\"border-bottom: 2px dotted; margin-bottom: 5px;\\\"> </p>\\r\\n                <p>Reciept</p>\\r\\n            </div>\\r\\n        </td>\\r\\n      \\r\\n        <td width=\\\"5%\\\" style=\\\"text-align: center;\\\">\\r\\n            <div class=\\\"text-center\\\">\\r\\n                <p style=\\\"border-bottom: 2px dotted; margin-bottom: 5px;\\\"> </p>\\r\\n                <p>Warehouse</p>\\r\\n            </div>\\r\\n        </td>\\r\\n        <!--<td width=\\\"5%\\\" style=\\\"text-align: center;\\\">-->\\r\\n        <!--    <div class=\\\"text-center\\\">-->\\r\\n        <!--        <p style=\\\"border-bottom: 2px dotted; margin-bottom: 5px;\\\">  </p>-->\\r\\n        <!--        <p>Seller</p>-->\\r\\n        <!--    </div>-->\\r\\n        <!--</td>-->\\r\\n    </tr>\\r\\n</table>\\r\\n\\r\\n\\r\\n\"}]",
 "html": "",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2025-08-27 14:05:09.659641",
 "modified_by": "Administrator",
 "module": "Semah",
 "name": "Bahri RN",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}